<!DOCTYPE html>
<html>
  <head>
    <title>Live Fiddle</title>
    <script src="jquery.min.js" type="text/javascript"></script>
    <script src="jquery-miniColors/jquery.miniColors.min.js" type="text/javascript"></script>
    <script src="CodeMirror-2.3/lib/codemirror.js" type="text/javascript"></script>
    <script src="CodeMirror-2.3/mode/javascript/javascript.js" type="text/javascript"></script>
    <script src="livefiddle.js" type="text/javascript"></script>
    <link rel="stylesheet" href="CodeMirror-2.3/lib/codemirror.css">
    <link rel="stylesheet" href="jquery-miniColors/jquery.miniColors.css">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <canvas id="drawing" width="500" height="300"></canvas>
    <img src="logo.png" id="logo">
    <button id="restart">Restart</button>
    <button id="pause">Pause</button>
    <input id="range" type="range" min="0" max="100" step="any">
    <div class="right">
      Load Program:
      <select id="load">
        <option value="graph">Graphing Calculator</option>
        <option value="code">Bouncing Balls</option>
        <option value="heart">Beating Heart</option>
      </select>
    </div>
    <textarea id="code" class="hidden">
friction = 0.9;
gravity  = 0.1;

$(balls).each(function() {

  Ball.prototype.draw = function () {
    ctx.fillStyle = this.color;
    ctx.save();
    ctx.translate(this.x, this.y);
    ctx.beginPath();
    ctx.arc(this.r,this.r,this.r,0,Math.PI*2,false);
    ctx.fill();
    ctx.restore();
  };

  this.draw();
  this.dy += gravity;
  this.x += this.dx;
  this.y += this.dy;
  if (this.y + this.r > ctx.canvas.height) {
    this.dy = -this.dy * friction;
    this.y = ctx.canvas.height - this.r;
  }
});

// This function is only executed once. It must be the last piece of code in your program.
function init () {
  offset = { x: 0, y: 0};
  Ball = function (x,y,r,dx,dy,color) {
    this.x = x;
    this.y = y;
    this.r = r;
    this.dx = dx;
    this.dy = dy;
    this.color = color;
  }

  balls = [];
  balls.push(new Ball(0,0,10,1,0,"red"));
  balls.push(new Ball(50,10,20,.5,0,"blue"));
}
    </textarea>
<textarea id="heart" class="hidden">
function drawHeart() {
  ctx.fillStyle = "red";
  ctx.beginPath();
  ctx.moveTo(75,40);
  ctx.bezierCurveTo(75,37,70,25,50,25);
  ctx.bezierCurveTo(20 + Math.sin(s)*5,25,20,62.5,20,62.5);
  ctx.bezierCurveTo(20,80 + Math.sin(s)*5,40,102,75,120);
  ctx.bezierCurveTo(110 + Math.sin(s)*5,102,130,80,130,62.5 );
  ctx.bezierCurveTo(130,62.5+ Math.sin(s)*5,130,25,100,25);
  ctx.bezierCurveTo(85,25,75,37,75,40);
  ctx.fill();
}

ctx.save();
ctx.translate(offset.x, offset.y);
drawHeart();
ctx.restore();

offset.x += Math.sin(r);
offset.y += Math.cos(r);
s += .4;
r += .1;

function init() {
  offset = {x: ctx.canvas.width/2 - 100, y: ctx.canvas.height/2 - 100};

  s = 0;
  r = 0;
}
</textarea>
<textarea id="graph" class="hidden">

/* You can fiddle with this code and see the results live! Try selecting the amplitude (50) and moving the slider to change its value. */

var amplitude = 50;

function f(x) {
  return Math.sin((x + dx)/32) * Math.sin(dx/50) * amplitude;
}


ctx.fillStyle = "#ccc";
ctx.font = "10pt Helvetica";
ctx.textAlign = "center";
ctx.textBaseline = "middle";

ctx.save();
ctx.translate(15, -20);
ctx.beginPath();
for (var x = 0; x <= ctx.canvas.width; x++) {
  ctx.lineTo(x,ctx.canvas.height/2 - f(x));
  if (x % 50 == 0)
    ctx.fillText(x, x , ctx.canvas.height);
}
for (var y = 0; y <= ctx.canvas.height; y++) {
  if (y % 50 == 0)
    ctx.fillText(y, 0 , ctx.canvas.height - y);
}
ctx.stroke();
ctx.restore();

dx += 0.5;

function init(){
  dx = 1;
}
</textarea>
    <span id="test"></span>
    <input id="picker"></input>
    <a href="https://github.com/Yakubovich/livefiddle"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
  </body>
</html>
